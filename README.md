# 백엔드 생존코스 2주차 과제

## REST API 설계

### 예시

- 게시글 조회 `GET /posts`
- 게시글 작성 `POST /posts`
- 게시글 수정 `PATCH /posts/{id}`
- 게시글 삭제 `DELETE /posts/{id}`

### 로그인/회원가입
관리하고자 하는 리소스 : session
세션으로 로그인 /로그아웃은 일시적으로 생성,삭제하여 사용하도록 설계하였다.
- 로그인 
    POST /session
- 로그아웃
    DELETE /session

- 회원가입
관리하고자 하는 리소스 :사용자
사용자를 생성하고 사용자 정보나 장바구니 리소스를 사용자별로 관리할수있도록 설계하였다.
    POST /users


### 내 정보
관리하고자하는 리소스 : 나의 정보
사용자마다 1개씩 가지고 있는 내용이지만, 사용자가 가지는 종속적인 속성으로 장바구니를 할당할 것이기때문에 
처리를 할때 명시적인 리소스를 제공해야한다고 생각해서 profile이라는 단수로 지정하여 설계하였다.
또한 users/me가 오면 현재의 session 값이나 access token들을 같이 요청시 주고 받아 해당하는 사용자의 정보를 가져오도록
설계하는 것이 보안이나 가시성에서 더 확실하기 볼수있을거라고 생각했다.

- 내 정보 
    GET /users/me/profile
- 내 정보 수정 
    PATCH /users/me/profile

### 상품
관리하고자하는 리소스 : 상품
- 상품 목록
    GET /items
- 상품 상세
    GET /items/{items_id}

### 상품 리뷰
관리하고자하는 리소스 : 리뷰
관리하는 관점에서는 상품에 종족적이긴하나 처리하는 기준에 있어서 결과적으로 comments 단위로 작업을 진행하고
보편적인 쇼핑몰에서의 상품 리뷰 건들의 처리 기능을 되돌아보면
첫번째 상품의 상세 내역에서 조회 및 작성하는 경우 또는 
두번째 사용자가 작성한 리뷰를 조회하고 수정하거나 주문목록 등에서 리뷰를 생성하는 경우로 생각된다. 
그렇기때문에 결과적으로 관리할 리소스의 단위를 리뷰로 정하고 조회시, 쿼리를 사용하여 조회하여 comments의 id를 확보하여 처리하는 형태로 설계하였다.

- 상품에 리뷰 조회
    GET /comments?
- 사용자가 작성한 상품의 리뷰 조회
    GET /comments?users=me

- 상품에 리뷰 작성
    POST /comments
- 상품에 리뷰 수정
    PATCH /comments/{comments_id}
- 상품에 리뷰 삭제
    DELETE /comments/{comments_id}

### 장바구니
관리하고자하는 리소스 : 장바구니의 상품(cart_items)
장바구니는 user별로 관리되어 user의 본인에 종속된 형태의 장바구니로 구현하였고 
(이것은 클라이언트의 입장에서 진행된 조회이고 관리자 모드에서의 각각의 고객의 장바구니를 조회할 일이 있을 것같지는 않아서 종족적으로 관리)
고객은 한개의 장바구니만을 가질 수 있기때문에 장바구니에서 실질적으로 하는 기능들은 
장바구니에 상품을 추가 하거나, 장바구니의 상품을 삭제 , 장바구니의 상품 목록 조회등 공통적으로 상품 단위로 처리를 진행 cart_items로 복수로 명시하고,
cart_items로의 id로 접근하여 삭제 할 수 있게 진행. 각각 장바구니 제품의 상품은  1:1로 mapping하여 관리합니다.

- 장바구니에 상품 추가
    POST /users/me/cart_items
- 장바구니에 상품 삭제
    DELETE /users/me/cart_items/{cart_items_id}
- 장바구니 (담긴 상품 목록)
    GET /users/me/cart_items

### 주문하기
관리하고자 하는 리소스 : 주문(orders)
사실은 주문하기 기능에서 관리해야하는 리소스가 2개라고 생각하였다. 사고자하는 상품들을 모아서 주문을 하고 쇼핑몰 입장에서는
그런 주문들이 모여 있는 것이기 때문에 고민을 했지만 상품들이 확정되서 주문이 들어가기 때문에 일단 주문단위의 처리를 하고있으므로 
주문을 관리하고자 하는 리소스로 추가하였고, 주문을 취소한다면 그것은 삭제보다는 상태변경에 가깝다고 생각이 들어 아래와 같이 설계하였다.

- 주문하기
    POST/orders
- 주문 목록
    (전체주문목록조회)
    GET /orders

## 질문과 답변

> 화면 URL과 API의 URL이 일치해야 할까? 달라야 한다면 그 이유는 무엇일까?
    화면의 url이 api의 url과 일치한다면 실제 사용하는 사람들이 

> 서버는 API 요청을 받을 때 사용자가 누구인지 어떻게 알 수 있을까?
    요청을 보낼때 message등에 해당 key값들을 넣어서 보내서 요청자를 명시적으로 알려주면 될 것 같다.

> API 요청으로 다른 사람의 정보를 함부로 볼 수 없게 하려면 어떻게 해야 할까?
    요청받은 정보가 각각 사용자에 mapping된 데이터라면, 타 사용자가 요청시 조회가 불가능하도록 처리를 따로 해줘야할 것 같다.